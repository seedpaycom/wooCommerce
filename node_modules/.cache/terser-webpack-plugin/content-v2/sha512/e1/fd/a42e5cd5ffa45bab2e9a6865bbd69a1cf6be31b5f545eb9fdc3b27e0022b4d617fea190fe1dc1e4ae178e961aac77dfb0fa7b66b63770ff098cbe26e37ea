{"code":"!function(e,r){for(var n in r)e[n]=r[n]}(exports,function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,\"a\",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p=\"\",n(n.s=0)}([function(e,r,n){\"use strict\";function t(e){return(t=\"function\"==typeof Symbol&&\"symbol\"===t(Symbol.iterator)?function(e){function r(r){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}(function(e){return void 0===e?\"undefined\":t(e)}):function(e){function r(r){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}(function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":void 0===e?\"undefined\":t(e)}))(e)}n(1),jQuery(function(e){var r=!0,n=!1,o=!1,a=e(\".uniqueTransactionIdHiddenForm\").val();function s(n){var u=e(\"#seedpayPhoneNumber\").val();a||!n?jQuery.post(seedpay_params.ajax_url,{action:\"checkTransactionStatus\",transaction_id:a,phone:u},function(a){var u=function(n,t){e(\".seedpay-messages\").html(n),e(\".seedpay-number-form-pending\").hide(),e(\".seedpay-number-form\").fadeIn(),r=!1;var o={error:n};return t&&t(o),o};if((void 0===a?\"undefined\":t(a))==t(\"\"))return u(a,n);var i=a.response.tryParseJson();if(a.error||i.errors||!(i||i[0]||i[0].status))return u(i.errors[0]||a.error||\"Error while checking your transaction's status\",n);var c=i[0].status;\"acceptedAndPaid\"==c?(e(\".seedpay-number-form\").hide(),e(\".seedpay-number-form-pending\").hide(),e(\".seedpay-number-form-success\").fadeIn(),e(\".woocommerce-checkout\").submit(),r=!1):\"rejected\"==c||\"errored\"==c?(e(\".seedpay-number-form-pending\").hide(),e(\".seedpay-number-form\").fadeIn(),r=!1):o||(o=!0,function e(){r?setTimeout(function(){s(),e()},5e3):o=!1}()),n&&n()}):n()}function u(){e(\".seedpay-number-form-pending\").hide(),e(\".seedpay-number-form\").fadeIn(),e(\".seedpay-messages\").empty(\"\");var r=e(\"#seedpayPhoneNumber\").val();return jQuery.post(seedpay_params.ajax_url,{action:\"requestPayment\",phone:r},function(r){var n=(r||{response:\"\"}).response.tryParseJson();r&&n&&n.message&&(e(\".seedpay-messages\").html(n.message),n.message.toLowerCase().indexOf(\"inv\")>=0)?i():r.error?e(\".seedpay-messages\").html(r.error):(a=r.request.uniqueTransactionId,e(\".uniqueTransactionIdHiddenForm\").val(a),e(\".seedpay-messages\").html(n.message),e(\".seedpay-number-form\").fadeOut(),e(\".seedpay-number-form-pending\").fadeIn(),s())}),!1}function i(){var t=e(\"#seedpayPhoneNumber\").val();jQuery.post(seedpay_params.ajax_url,{action:\"checkUserStatus\",phone:t},function(t){if(1==e.parseJSON(t).response.isRegistered)return e(\".seedpay_payment_registered\").val(1),void u();e(\".seedpay_payment_registered\").val(0),e(\".seedpay-messages\").html(\"Please check your text messages for an invite.\"),r=!0,n||(n=!0,function e(){r?setTimeout(function(){i(),e()},5e3):n=!1}())})}e(\"form.woocommerce-checkout\").on(\"checkout_place_order\",function(){if(e(\"#payment_method_seedpay\").is(\":checked\"))return r=!0,e(\"#seedpayPhoneNumber\").val(e(\"#seedpayPhoneNumber\").val().replace(/\\D/g,\"\")),u(),!1}),e(document).on(\"click\",\".seedpay-cancel-payment-submit\",function(){return e(\".seedpay-number-form-pending\").hide(),e(\".seedpay-number-form\").fadeIn(),e(\".seedpay-messages\").empty(\"\"),r=!1,!1}),1==e(\".seedpay_recheck_payment\").val()&&s()})},function(e,r,n){\"use strict\";String.prototype.tryParseJson=function(){try{return JSON.parse(this)}catch(e){return!1}}}]));","extractedComments":[]}