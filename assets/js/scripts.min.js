/*! woocommerce-gateway-seedpay 2019-02-11 */
jQuery(function(a){function b(c,d){jQuery.post(seedpay_params.ajax_url,{action:"ajax_seedpay_check_request",transaction_id:c,phone:d},function(e){var f=a.parseJSON(e);if(""!=f.error||0!=a(".seedpay_payment_cancel").val())return a(".seedpay-messages").html(f.error),a(".seedpay_payment_cancel").val("1"),a(".seedpay-number-form-pending").hide(),a(".seedpay-number-form").fadeIn(),f.error;"acceptedAndPaid"==f.response[0].status?(a(".seedpay_payment_success").val(f.response[0].status),a(".seedpay-number-form").hide(),a(".seedpay-number-form-pending").hide(),a(".seedpay-number-form-success").fadeIn(),a(".woocommerce-checkout").submit()):"rejected"==f.response[0].status?(a(".seedpay_payment_cancel").val("1"),a(".seedpay-number-form-pending").hide(),a(".seedpay-number-form").fadeIn()):setTimeout(function(){b(c,d)},5e3)})}function c(e){var f=d(e);console.log(f),1==a(".seedpay_payment_registered").val()?jQuery.post(seedpay_params.ajax_url,{action:"ajax_seedpay_submit_request",phone:e},function(c){var d=a.parseJSON(c);if(""==d.error){var f=d.request.uniqueTransactionId;a(".seedpay_payment_cart_hash").val(d.request.uniqueTransactionId),a(".seedpay-messages").html(d.response.message),a(".seedpay-number-form").fadeOut(),a(".seedpay-number-form-pending").fadeIn(),b(f,e)}else a(".seedpay-messages").html(d.error)}):setTimeout(function(){c(e)},2e3)}function d(b){jQuery.post(seedpay_params.ajax_url,{action:"ajax_seedpay_check_user_status",phone:b},function(b){var c=a.parseJSON(b);console.log(c.response),1==c.response.isRegistered?a(".seedpay_payment_registered").val(1):a(".seedpay_payment_registered").val(0)})}1==a(".seedpay_recheck_payment").val()&&b(a(".seedpay_recheck_payment").attr("data-id"),a(".seedpay_recheck_payment").attr("data-pn")),a(document).on("click",".seedpay-cancel-payment-submit",function(){return a(".seedpay-number-form-pending").hide(),a(".seedpay-number-form").fadeIn(),!1}),a(document).on("click",".seedpay-request-payment-submit",function(){return a(".seedpay-messages").empty(),a(".seedpay_payment_cancel").val("0"),c(a("#seedpay_payment_phone").val()),!1})});